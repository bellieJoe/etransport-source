<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>My Bookings</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content color="background">
  <ion-card >
    <ion-item lines="none">
      <ion-label>Filter</ion-label>
      <ion-select value="all" interface="action-sheet" cancelText="Cancel Selection">
        <ion-select-option value="all">All</ion-select-option>
        <ion-select-option value="pending">Pending</ion-select-option>
        <ion-select-option value="accepted">Accepted</ion-select-option>
        <ion-select-option value="canceled">Canceled</ion-select-option>
        <ion-select-option value="declined">Declined</ion-select-option>
      </ion-select>
    </ion-item>
  </ion-card>
    <div class="my-3 bg-white pb-3" *ngFor="let booking of transportBookingService.transport_bookings">
      <div class="px-3 border-bottom">
        <label class="text-secondary">{{ booking.created_at | date:'mediumDate' }}</label>
      </div>
      <ion-item lines="none">
        <ion-label color="primary">
          {{ booking.service.service_name }} 
        </ion-label>
        <ion-badge slot="end" [color]="setBookingStatusColor(booking.booking_status)" >{{ booking.booking_status | titlecase }}</ion-badge>
      </ion-item>
      <div class="px-3">
        <ion-item color="light" lines="none" detail="true" button id="service-detail-modal-{{ booking.transport_booking_id }}">
          <ion-label>Service details</ion-label>
        </ion-item>
        <ion-modal trigger="service-detail-modal-{{ booking.transport_booking_id }}" [initialBreakpoint]="0.75" [breakpoints]="[0, 0.25, 0.5, 1]">
          <ng-template >
            <ion-header>
              <ion-toolbar>
                <ion-title><span class="text-primary">{{ booking.service.service_name }}</span> details</ion-title>
              </ion-toolbar>
            </ion-header>
            <ion-content color="background">
              <br>
              <ion-item lines="full">
                <ion-label >Driver</ion-label>
                <ion-label slot="end" color="medium">{{ booking.service.driver}}</ion-label>
              </ion-item>
              <ion-item lines="full">
                <ion-label >License Number</ion-label>
                <ion-label slot="end" color="medium">{{ booking.service.license_number}}</ion-label>
              </ion-item>
              <ion-item lines="full">
                <ion-label >Vehicle Model</ion-label>
                <ion-label slot="end" color="medium">{{ booking.service.vehicle_model}}</ion-label>
              </ion-item>
              <ion-item lines="full">
                <ion-label >Plate Number</ion-label>
                <ion-label slot="end" color="medium">{{ booking.service.plate_number}}</ion-label>
              </ion-item>
              <ion-item lines="full">
                <ion-label >Capacity</ion-label>
                <ion-label slot="end" color="medium">{{ booking.service.capacity}} slots</ion-label>
              </ion-item>
              <ion-item lines="full">
                <ion-label>Service Type</ion-label>
                <ion-label slot="end" color="medium" title="{{ booking.service.service_type == 'both' ? 'Passenger & Luggage' : (booking.service.service_type | titlecase)}}">
                  {{ booking.service.service_type == 'both' ? 'Passenger & Luggage' : (booking.service.service_type | titlecase)}}
                </ion-label>
              </ion-item>
              <ion-item lines="full">
                <ion-label slot="start">Capacity</ion-label>
                <ion-label slot="end" color="medium">{{ booking.service.capacity}} slots</ion-label>
              </ion-item>
            </ion-content>
          </ng-template>
        </ion-modal>
      </div>

    </div>
</ion-content>
